{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <h3 class="fw-bold mb-4 text-center">Chọn chủ đề để học</h3>

    <div class="d-flex flex-column gap-3">
      {% for topic in topics %}
      <a href="{% url 'study_session' topic.id %}" class="text-decoration-none">
        <div class="card p-3 hover-effect">
          <div class="d-flex align-items-center">
            <div class="me-3">
              {% if topic.image %}
              <img
                src="{{ topic.image.url }}"
                class="rounded-circle"
                width="60"
                height="60"
                style="object-fit: cover"
              />
              {% else %}
              <div
                class="rounded-circle d-flex align-items-center justify-content-center text-white fw-bold topic-icon"
              >
                {{ topic.title|slice:":1" }}
              </div>
              {% endif %}
            </div>

            <div class="flex-grow-1">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="fw-bold text-dark mb-1">{{ topic.title }}</h5>
                <span class="badge bg-light text-dark border"
                  >{{ topic.progress|default:0 }}%</span
                >
              </div>
              <small class="text-muted d-block mb-2"
                >{{ topic.description|truncatewords:10 }}</small
              >

              <div class="progress" style="height: 6px">
                <div
                  class="progress-bar bg-primary"
                  role="progressbar"
                  data-progress="{{ topic.progress|default:0 }}"
                  aria-valuenow="{{ topic.progress|default:0 }}"
                  aria-valuemin="0"
                  aria-valuemax="100"
                ></div>
              </div>
            </div>

            <div class="ms-3 text-muted">
              <i class="fas fa-chevron-right"></i>
            </div>
          </div>
        </div>
      </a>
      {% empty %}
      <div class="text-center text-muted py-5">
        <i class="fas fa-book-open fa-3x mb-3"></i>
        <p>Chưa có chủ đề nào. Vui lòng liên hệ admin để thêm chủ đề.</p>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .hover-effect {
    transition: transform 0.2s;
  }
  .hover-effect:hover {
    transform: translateY(-3px);
    border-color: #0d6efd;
  }
  .topic-icon {
    width: 60px;
    height: 60px;
    background-color: #0d6efd;
    font-size: 24px;
  }
</style>

<script src="{% static 'study/js/topic_list.js' %}"></script>
{% endblock %}
